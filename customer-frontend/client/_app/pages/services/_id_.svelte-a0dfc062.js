import{S as he,i as me,s as ve,e as u,t as N,k,c as f,a as g,h as V,d as o,m as S,f as se,b as s,g as L,F as t,j as ae,w as _e,W as be,x as ye,y as xe,q as ge,o as Ee,G as we,B as ke,M as fe,v as Se,a1 as De,J as Z,K as Te,ab as J,ac as Ie,L as Re}from"../../chunks/vendor-0a4ab0d8.js";import{d as Be,p as Pe}from"../../chunks/apiCallStore-6173ff28.js";import{n as oe}from"../../chunks/Toast.svelte_svelte_type_style_lang-63444e65.js";import{T as je}from"../../chunks/Toast-c6ac66df.js";import{S as Ne,c as Ve,U as Ae}from"../../chunks/checkAuth-9ce0648b.js";import{g as Ue}from"../../chunks/navigation-b10cf5bf.js";import"../../chunks/singletons-4a680913.js";function de(n,l,r){const i=n.slice();return i[11]=l[r],i}function pe(n){let l,r,i,a,_=n[11]+"",v,d;return{c(){l=u("p"),r=u("span"),i=N("\u{1F449}"),a=k(),v=N(_),d=k(),this.h()},l(D){l=f(D,"P",{style:!0,class:!0});var p=g(l);r=f(p,"SPAN",{style:!0});var P=g(r);i=V(P,"\u{1F449}"),P.forEach(o),a=S(p),v=V(p,_),d=S(p),p.forEach(o),this.h()},h(){se(r,"position","relative"),se(r,"top","-3px"),se(l,"margin-top","10px"),s(l,"class","text-xl uppercase")},m(D,p){L(D,l,p),t(l,r),t(r,i),t(l,a),t(l,v),t(l,d)},p(D,p){p&1&&_!==(_=D[11]+"")&&ae(v,_)},d(D){D&&o(l)}}}function Le(n){let l,r,i,a,_,v,d,D,p,P,E,T,R,y,w,H;return{c(){l=u("div"),r=u("br"),i=k(),a=u("p"),_=N("You are already authenticated and Booked user!!"),v=k(),d=u("p"),D=N("Do you still want to create a new account?"),p=k(),P=u("br"),E=k(),T=u("div"),R=u("button"),y=N("Create New Account"),this.h()},l(c){l=f(c,"DIV",{class:!0});var h=g(l);r=f(h,"BR",{}),i=S(h),a=f(h,"P",{});var A=g(a);_=V(A,"You are already authenticated and Booked user!!"),A.forEach(o),v=S(h),d=f(h,"P",{});var O=g(d);D=V(O,"Do you still want to create a new account?"),O.forEach(o),p=S(h),P=f(h,"BR",{}),h.forEach(o),E=S(c),T=f(c,"DIV",{class:!0});var U=g(T);R=f(U,"BUTTON",{class:!0});var x=g(R);y=V(x,"Create New Account"),x.forEach(o),U.forEach(o),this.h()},h(){s(l,"class","text-center text-xl"),s(R,"class","bg-yellow-500 hover:bg-yellow-200 hover:text-black text-white font-bold py-2 px-4 rounded transition-all items-center"),s(T,"class","flex justify-center ")},m(c,h){L(c,l,h),t(l,r),t(l,i),t(l,a),t(a,_),t(l,v),t(l,d),t(d,D),t(l,p),t(l,P),L(c,E,h),L(c,T,h),t(T,R),t(R,y),w||(H=Z(R,"click",n[9]),w=!0)},p:Te,d(c){c&&o(l),c&&o(E),c&&o(T),w=!1,H()}}}function He(n){let l,r,i,a,_,v,d,D,p,P,E,T,R,y,w,H,c,h,A,O,U,x,q,b,M,z,j,e,I,m,F,C,K,W,Q;return{c(){l=u("h1"),r=N("Book Your Service"),i=k(),a=u("form"),_=u("div"),v=u("label"),d=N("Location"),D=k(),p=u("input"),P=k(),E=u("div"),T=u("label"),R=N("Vehicle"),y=k(),w=u("input"),H=k(),c=u("div"),h=u("div"),A=u("p"),O=N("Slot Date :"),U=k(),x=u("input"),q=k(),b=u("div"),M=u("p"),z=N("Slot Time :"),j=k(),e=u("input"),I=k(),m=u("br"),F=k(),C=u("button"),K=N("Submit"),this.h()},l(B){l=f(B,"H1",{class:!0});var Y=g(l);r=V(Y,"Book Your Service"),Y.forEach(o),i=S(B),a=f(B,"FORM",{});var X=g(a);_=f(X,"DIV",{class:!0});var $=g(_);v=f($,"LABEL",{class:!0,for:!0});var re=g(v);d=V(re,"Location"),re.forEach(o),D=S($),p=f($,"INPUT",{class:!0,type:!0,location:!0,id:!0}),$.forEach(o),P=S(X),E=f(X,"DIV",{class:!0});var ee=g(E);T=f(ee,"LABEL",{class:!0,for:!0});var ne=g(T);R=V(ne,"Vehicle"),ne.forEach(o),y=S(ee),w=f(ee,"INPUT",{class:!0,type:!0,name:!0,id:!0}),ee.forEach(o),H=S(X),c=f(X,"DIV",{class:!0});var G=g(c);h=f(G,"DIV",{class:!0});var te=g(h);A=f(te,"P",{class:!0});var ie=g(A);O=V(ie,"Slot Date :"),ie.forEach(o),U=S(te),x=f(te,"INPUT",{class:!0,type:!0,id:!0,name:!0,min:!0,max:!0}),te.forEach(o),q=S(G),b=f(G,"DIV",{class:!0});var le=g(b);M=f(le,"P",{class:!0});var ce=g(M);z=V(ce,"Slot Time :"),ce.forEach(o),j=S(le),e=f(le,"INPUT",{class:!0,type:!0,id:!0,name:!0,min:!0,max:!0}),le.forEach(o),I=S(G),m=f(G,"BR",{}),F=S(G),C=f(G,"BUTTON",{class:!0,type:!0});var ue=g(C);K=V(ue,"Submit"),ue.forEach(o),G.forEach(o),X.forEach(o),this.h()},h(){s(l,"class","block w-full text-center text-gray-800 text-2xl font-bold mb-6"),s(v,"class","mb-2 font-bold text-lg text-gray-900"),s(v,"for","location"),s(p,"class","border py-2 px-3 text-grey-800"),s(p,"type","text"),s(p,"location","location"),s(p,"id","location"),s(_,"class","flex flex-col mb-4"),s(T,"class","mb-2 font-bold text-lg text-gray-900"),s(T,"for","vehicle"),s(w,"class","border py-2 px-3 text-grey-800"),s(w,"type","text"),s(w,"name","vehicle"),s(w,"id","vehicle"),s(E,"class","flex flex-col mb-4"),s(A,"class","mb-2 font-bold text-lg text-gray-900"),s(x,"class","border py-2 px-3 text-grey-800"),s(x,"type","date"),s(x,"id","start"),s(x,"name","trip-start"),s(x,"min",n[3]()),s(x,"max",n[3](30)),s(h,"class","flex flex-row justify-around"),s(M,"class","mb-2 font-bold text-lg text-gray-900"),s(e,"class","border py-2 px-3 text-grey-800"),s(e,"type","Time"),s(e,"id","start"),s(e,"name","trip-start"),s(e,"min","09:00"),s(e,"max","18:00"),s(b,"class","flex flex-row justify-around"),s(C,"class","bg-yellow-500 hover:bg-yellow-200 hover:text-black text-white font-bold py-2 px-4 rounded transition-all items-center"),s(C,"type","submit"),s(c,"class","flex flex-col mb-4 content-between")},m(B,Y){L(B,l,Y),t(l,r),L(B,i,Y),L(B,a,Y),t(a,_),t(_,v),t(v,d),t(_,D),t(_,p),J(p,n[2].location),t(a,P),t(a,E),t(E,T),t(T,R),t(E,y),t(E,w),J(w,n[2].vehicle),t(a,H),t(a,c),t(c,h),t(h,A),t(A,O),t(h,U),t(h,x),J(x,n[2].slot.date),t(c,q),t(c,b),t(b,M),t(M,z),t(b,j),t(b,e),J(e,n[2].slot.time),t(c,I),t(c,m),t(c,F),t(c,C),t(C,K),W||(Q=[Z(p,"input",n[5]),Z(w,"input",n[6]),Z(x,"input",n[7]),Z(e,"input",n[8]),Z(a,"submit",Ie(n[4]))],W=!0)},p(B,Y){Y&4&&p.value!==B[2].location&&J(p,B[2].location),Y&4&&w.value!==B[2].vehicle&&J(w,B[2].vehicle),Y&4&&J(x,B[2].slot.date),Y&4&&J(e,B[2].slot.time)},d(B){B&&o(l),B&&o(i),B&&o(a),W=!1,Re(Q)}}}function Oe(n){let l,r,i,a,_,v=n[0][0].planName+"",d,D,p,P,E,T,R=n[0][0].rate+"",y,w,H,c,h,A,O,U,x;document.title=l="Rezo - "+n[0][0].planName;let q=n[0][0].dataPoints,b=[];for(let e=0;e<q.length;e+=1)b[e]=pe(de(n,q,e));function M(e,I){return e[1]?Le:He}let z=M(n),j=z(n);return U=new je({}),{c(){r=k(),i=u("div"),a=u("h1"),_=N("Plan : "),d=N(v),D=k(),p=u("hr"),P=k(),E=u("h1"),T=N("Rate : "),y=N(R),w=k();for(let e=0;e<b.length;e+=1)b[e].c();H=k(),c=u("div"),h=u("div"),j.c(),O=k(),_e(U.$$.fragment),this.h()},l(e){be('[data-svelte="svelte-1xrh3je"]',document.head).forEach(o),r=S(e),i=f(e,"DIV",{class:!0});var m=g(i);a=f(m,"H1",{class:!0});var F=g(a);_=V(F,"Plan : "),d=V(F,v),F.forEach(o),D=S(m),p=f(m,"HR",{}),P=S(m),E=f(m,"H1",{class:!0});var C=g(E);T=V(C,"Rate : "),y=V(C,R),C.forEach(o),w=S(m);for(let Q=0;Q<b.length;Q+=1)b[Q].l(m);m.forEach(o),H=S(e),c=f(e,"DIV",{class:!0});var K=g(c);h=f(K,"DIV",{class:!0});var W=g(h);j.l(W),W.forEach(o),K.forEach(o),O=S(e),ye(U.$$.fragment,e),this.h()},h(){s(a,"class","text-2xl my-8 uppercase"),s(E,"class","text-xl uppercase"),s(i,"class","flex flex-col"),s(h,"class",A=""+((n[1]?"w-full":"w-1/2")+" flex-row bg-white rounded shadow-2xl p-8 m-4")),s(c,"class","flex justify-center")},m(e,I){L(e,r,I),L(e,i,I),t(i,a),t(a,_),t(a,d),t(i,D),t(i,p),t(i,P),t(i,E),t(E,T),t(E,y),t(i,w);for(let m=0;m<b.length;m+=1)b[m].m(i,null);L(e,H,I),L(e,c,I),t(c,h),j.m(h,null),L(e,O,I),xe(U,e,I),x=!0},p(e,[I]){if((!x||I&1)&&l!==(l="Rezo - "+e[0][0].planName)&&(document.title=l),(!x||I&1)&&v!==(v=e[0][0].planName+"")&&ae(d,v),(!x||I&1)&&R!==(R=e[0][0].rate+"")&&ae(y,R),I&1){q=e[0][0].dataPoints;let m;for(m=0;m<q.length;m+=1){const F=de(e,q,m);b[m]?b[m].p(F,I):(b[m]=pe(F),b[m].c(),b[m].m(i,null))}for(;m<b.length;m+=1)b[m].d(1);b.length=q.length}z===(z=M(e))&&j?j.p(e,I):(j.d(1),j=z(e),j&&(j.c(),j.m(h,null))),(!x||I&2&&A!==(A=""+((e[1]?"w-full":"w-1/2")+" flex-row bg-white rounded shadow-2xl p-8 m-4")))&&s(h,"class",A)},i(e){x||(ge(U.$$.fragment,e),x=!0)},o(e){Ee(U.$$.fragment,e),x=!1},d(e){e&&o(r),e&&o(i),we(b,e),e&&o(H),e&&o(c),j.d(),e&&o(O),ke(U,e)}}}async function Ke(n){let l=n.page.params.id;return await Be(l)}function Ce(n,l,r){let i,a;fe(n,Ae,y=>r(10,i=y)),fe(n,Pe,y=>r(0,a=y));const _=y=>y?new Date(new Date().getTime()+y*24*60*60*1e3).toISOString().slice(0,10):new Date().toISOString().slice(0,10);let v=!1,d={service:"",location:"",vehicle:"",slot:{date:_(),time:"10:00"}};const D=async()=>{try{const y=d,w=await De({method:"POST",url:`${Ne}/api/v1/bookings`,data:y,headers:i});w.data.status==="success"&&oe.success("Successfully Booked",1e3),console.log(w),setTimeout(()=>{Ue("/bookings")},1e3)}catch(y){console.log("error",y.response.data.message),oe.danger(y.response.data.message,1500)}};Se(async()=>{await Ve()});function p(){d.location=this.value,r(2,d),r(0,a)}function P(){d.vehicle=this.value,r(2,d),r(0,a)}function E(){d.slot.date=this.value,r(2,d),r(0,a)}function T(){d.slot.time=this.value,r(2,d),r(0,a)}const R=()=>{r(1,v=!v),oe.info("Loading...",1e3)};return n.$$.update=()=>{n.$$.dirty&1&&r(2,d.service=a[0]._id,d)},[a,v,d,_,D,p,P,E,T,R]}class We extends he{constructor(l){super();me(this,l,Ce,Oe,ve,{})}}export{We as default,Ke as load};
